<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Azizbek Math Academy</title>
  <meta name="description" content="Azizbek Math Academy â€” Maktab va universitet darajasidagi matematika o'quv platformasi" />
  <style>
    :root{
      --bg1: #0b1226;
      --bg2: #07102a;
      --card: rgba(255,255,255,0.04);
      --accent: #2f8cff;
      --accent-2: #6cc1ff;
      --muted: #9fb0d6;
      --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.02);
      --radius: 12px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(47,140,255,0.06), transparent),
                  linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#ecf5ff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
    }
    header{
      display:flex;
      align-items:center;
      gap:18px;
      padding:18px 24px;
      border-bottom:1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
    }
    .logo {
      width:56px; height:56px; border-radius:10px;
      background: linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex; align-items:center; justify-content:center; font-weight:700; color:#04203a;
      box-shadow: 0 6px 20px rgba(47,140,255,0.12);
      font-family: "Segoe UI", Roboto, Arial;
    }
    .brand{
      display:flex; flex-direction:column;
      line-height:1;
    }
    .brand .title{font-size:18px; font-weight:700; letter-spacing:0.2px}
    .brand .sub{font-size:12px; color:var(--muted)}
    main{max-width:1150px;margin:28px auto;padding:16px}
    .hero{
      display:grid; grid-template-columns: 1fr 360px; gap:20px;
      align-items:start;
    }
    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: var(--radius);
      padding:18px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
    }
    .lead{font-size:16px; color:var(--muted); margin-top:8px}
    .choice-buttons{display:flex; gap:12px; margin-top:16px; flex-wrap:wrap}
    .btn{
      background: linear-gradient(180deg,var(--accent), #2876e6);
      color:white; border:none; padding:10px 14px; border-radius:10px; cursor:pointer;
      box-shadow: 0 6px 18px rgba(47,140,255,0.12); font-weight:600;
    }
    .btn.secondary{
      background: transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted);
    }
    .search{
      display:flex; gap:8px; margin-top:12px;
    }
    input[type="search"]{
      flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04);
      background:transparent; color:inherit;
    }
    .content-area{display:grid; grid-template-columns: 320px 1fr; gap:20px; margin-top:22px}
    /* sidebar */
    .sidebar{position:sticky; top:20px; height:fit-content}
    .nav-card{padding:12px; border-radius:10px; background:var(--card); margin-bottom:12px}
    .nav-section{font-weight:700; color:var(--accent-2); margin-bottom:8px}
    .nav-list{display:flex; flex-direction:column; gap:6px}
    .nav-item{padding:8px 10px; border-radius:8px; cursor:pointer; color:var(--muted); font-weight:600;}
    .nav-item:hover{background:rgba(255,255,255,0.02); color:var(--accent-2)}
    .nav-item.active{background: linear-gradient(90deg, rgba(47,140,255,0.08), rgba(108,193,255,0.03)); color:var(--accent-2)}
    /* main content cards */
    .topic-card{background:var(--glass); padding:14px; border-radius:10px; margin-bottom:12px; border-left:4px solid rgba(47,140,255,0.12)}
    .topic-header{display:flex; justify-content:space-between; align-items:center; gap:12px}
    .topic-title{font-size:18px; font-weight:700}
    .topic-desc{color:var(--muted); margin-top:6px}
    .subtopic{margin-top:10px; padding:12px; border-radius:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border:1px solid rgba(255,255,255,0.02)}
    .subtopic h4{margin:0;font-size:16px}
    .subtopic p{color:var(--muted); margin:6px 0 0 0}
    .show-more{margin-top:10px; display:inline-block; color:var(--accent-2); cursor:pointer; font-weight:700}
    /* PDF button */
    .pdf-btn{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:8px; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#04203a; font-weight:700; text-decoration:none}
    /* footer */
    footer{margin-top:28px; padding:20px; text-align:center; color:var(--muted); font-size:13px}
    /* responsive */
    @media (max-width:920px){
      .hero{grid-template-columns:1fr}
      .content-area{grid-template-columns:1fr}
      .sidebar{position:static}
    }
    /* collapsible helpers */
    .collapsible{cursor:pointer;padding:10px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02);margin-top:8px}
    .collapsible .chev{float:right; transform:rotate(0deg); transition:transform .25s}
    .collapsible.open .chev{transform:rotate(90deg)}
    .hidden{display:none}
    /* search highlights */
    mark{background:#ffd54d;color:#041024;padding:0 4px;border-radius:3px}
  </style>
</head>
<body>
  <header>
    <div class="logo">AM</div>
    <div class="brand">
      <div class="title">Azizbek Math Academy</div>
      <div class="sub">Maktab va Universitet matematikasi</div>
    </div>
  </header>

  <main>
    <!-- START PAGE: choice -->
    <section id="startSection" class="hero">
      <div class="panel">
        <h1>Azizbek Math Academy</h1>
        <p class="lead">Matematika: 5â€‘sinfdan universitetgacha. Siz oâ€˜quvchimisiz yoki talabamisiz? Tanlang va boshlang.</p>

        <div class="choice-buttons">
          <button class="btn" onclick="enterSite('student')">Oâ€˜quvchiman</button>
          <button class="btn" onclick="enterSite('university')">Talabaman</button>
        </div>

        <div style="margin-top:16px">
          <label style="color:var(--muted);font-weight:700">Qidiruv: mavzu yoki kalit soâ€˜zni kiriting</label>
          <div class="search">
            <input id="globalSearch" type="search" placeholder="masalan: kvadrat tenglama, integral, sinus..." />
            <button class="btn secondary" onclick="doSearch()">Qidirish</button>
          </div>
          <p style="color:var(--muted);font-size:13px;margin-top:8px">Tugmalar orqali tez boshlash: <span style="color:var(--accent-2);font-weight:700">Funksiya</span>, <span style="color:var(--accent-2);font-weight:700">Tenglama</span></p>
        </div>

      </div>

      <aside class="panel">
        <h3 style="margin:0 0 8px 0">Tez kirish</h3>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button class="btn secondary" onclick="enterSite('student');openTopic('Algebra')">Maktab: Algebra</button>
          <button class="btn secondary" onclick="enterSite('student');openTopic('Geometriya')">Maktab: Geometriya</button>
          <a class="pdf-btn" href="matanaliz.pdf" target="_blank">ðŸ“„ Matanaliz PDF</a>
        </div>

        <div style="margin-top:14px;color:var(--muted);font-size:13px">
          <strong>Muallif:</strong><br/>Azizbek Ro'ziboyev tomonidan yaratilgan oâ€˜quv platforma
        </div>
      </aside>
    </section>

    <!-- MAIN CONTENT (hidden until enterSite called) -->
    <section id="app" class="content-area" style="display:none">
      <nav class="sidebar">
        <div class="nav-card">
          <div class="nav-section">Maktab (5â€“11)</div>
          <div class="nav-list" id="schoolNav">
            <!-- filled via JS -->
          </div>
        </div>

        <div class="nav-card">
          <div class="nav-section">Universitet</div>
          <div class="nav-list" id="uniNav"></div>
        </div>

        <div class="nav-card">
          <div class="nav-section">Foydali</div>
          <div class="nav-list">
            <div class="nav-item" onclick="openPDF('matanaliz.pdf')">Matanaliz PDF</div>
            <div class="nav-item" onclick="scrollToTop()">Bosh sahifa</div>
          </div>
        </div>
      </nav>

      <main class="main-panel" id="mainPanel" style="padding:0">
        <!-- content cards injected here -->
      </main>
    </section>

    <!-- TEMPLATE: topic card (hidden) -->
    <template id="topicTemplate">
      <article class="topic-card">
        <div class="topic-header">
          <div>
            <div class="topic-title"></div>
            <div class="topic-desc"></div>
          </div>
          <div>
            <a class="pdf-btn hidden" target="_blank" rel="noopener">ðŸ“„ PDF</a>
          </div>
        </div>
        <div class="subtopics"></div>
      </article>
    </template>

    <template id="subtopicTemplate">
      <div class="subtopic">
        <h4></h4>
        <p></p>
        <div class="extras" style="margin-top:8px"></div>
      </div>
    </template>

  </main>

  <footer>
    Â© 2025 Azizbek Math Academy â€” Azizbek Ro'ziboyev tomonidan yaratilgan oâ€˜quv platforma
  </footer>

  <script>
    /* ======= DATA: Mavzular va kontent ======= */
    const DATA = {
      school: {
        "Algebra": {
          desc: "Sonlar, tenglamalar, kvadrat tenglamalar va funksiya asoslari.",
          topics: [
            {
              title: "Sonlar va algebraik ifodalar",
              text: "Sonlar turlari: natural, butun, ratsional va irratsional. Algebraik ifodalarni soddalashtirish: ko'paytirish, bo'lish, daraja."
            },
            {
              title: "Kvadrat tenglama",
              text: "Umumiy ko'rinish: axÂ² + bx + c = 0. Diskriminant D = bÂ² - 4ac. Ildizlar: x = (-b Â± âˆšD)/(2a).",
              extras: [{type:'example', value:'Masala: xÂ² - 5x + 6 = 0 â†’ D=25-24=1 â†’ x=2 va x=3'}]
            },
            {
              title: "Funksiya va uning grafigi",
              text: "Funksiya f: Xâ†’Y â€” har bir x ga yagona y mos keladi. Misol: y=xÂ² hosil qiladi parabola.",
              extras: [{type:'image', value:'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Function_graph.svg/800px-Function_graph.svg.png'}]
            }
          ]
        },
        "Geometriya": {
          desc: "Figuralar, burchaklar, perimetr va yuzani hisoblash.",
          topics: [
            {title:"Uchburchak", text:"Ichki burchaklar yig'indisi 180Â°. Perimetr P=a+b+c. Yuzi: S=1/2 * a * h."},
            {title:"Doira", text:"Radius r bo'lsa, perimetr L = 2Ï€r, yuz S = Ï€rÂ²."}
          ]
        },
        "Trigonometriya": {
          desc: "Trigonometrik funksiyalar va ularning asosiy tenglamalari.",
          topics:[
            {title:"Asosiy formulalar", text:"sinÂ²Î± + cosÂ²Î± = 1; tgÎ± = sinÎ±/cosÎ±; ctgÎ± = 1/tgÎ±."},
            {title:"Sinus va kosinus qonuni", text:"Sinus qonuni: a/sinA = b/sinB = c/sinC. Kosinus qonuni: cÂ² = aÂ² + bÂ² - 2ab cosC."}
          ]
        },
        "Ehtimollik": {
          desc: "Boshlang'ich ehtimollik tushunchalari.",
          topics:[
            {title:"Asosiy tushuncha", text:"Ehtimollik P(A) = muvaffaqiyatli holatlar soni / barcha holatlar soni."},
            {title:"O'rta va median", text:"O'rtacha qiymat xÌ„ = (x1 + x2 + ... + xn)/n; Median - tartiblangan ro'yxat markaziy elementi."}
          ]
        }
      },
      university: {
        "Matematik analiz": {
          desc: "Chegaralar, hosila, integral va ularning amaliyotlari.",
          topics:[
            {title:"Chegara va hosila", text:"f'(x) = lim_{hâ†’0} [f(x+h)-f(x)]/h. Hosila funksiya o'sish tezligini bildiradi."},
            {title:"Integrallar", text:"âˆ«xÂ² dx = xÂ³/3 + C. Integrallar maydon hisobida qo'llanadi.", extras:[{type:'pdf', value:'matanaliz.pdf'}]}
          ]
        },
        "Chiziqli algebra": {
          desc: "Matritsalar, determinant va vektorlar.",
          topics:[
            {title:"Matritsalar", text:"Matritsa A - n x n shaklida bo'lsa, Determinant det(A) va teskarini topish muhim."},
            {title:"Vektorlar", text:"Vektorlar qo'shiladi, skalyar ko'paytma: aÂ·b = |a||b|cosÎ¸."}
          ]
        },
        "Ehtimollik va statistika": {
          desc:"Ehtimollik nazariyasi va statistik ko'rsatkichlar.",
          topics:[
            {title:"Ehtimollik tarqatilishlari", text:"Binom, normal va Poisson taqsimotlari haqida kirish."},
            {title:"Statistik ko'rsatkichlar", text:"O'rtacha, dispersiya va standart og'ish."}
          ]
        }
      }
    };

    /* ======= HELPERS: render navigation and content ======= */
    function enterSite(kind){
      document.getElementById('startSection').style.display='none';
      document.getElementById('app').style.display='grid';
      buildNav(kind);
      // open first topic for convenience
      if(kind==='student') openTopic(Object.keys(DATA.school)[0]);
      else openTopic(Object.keys(DATA.university)[0]);
      // focus search
      document.getElementById('globalSearch').focus();
    }

    function buildNav(kind){
      const schoolNav = document.getElementById('schoolNav');
      const uniNav = document.getElementById('uniNav');
      schoolNav.innerHTML=''; uniNav.innerHTML='';
      // school
      for(const key of Object.keys(DATA.school)){
        const el = document.createElement('div');
        el.className='nav-item';
        el.textContent=key;
        el.onclick = ()=> { openTopic(key); setActiveNav(el); };
        schoolNav.appendChild(el);
      }
      // uni
      for(const key of Object.keys(DATA.university)){
        const el = document.createElement('div');
        el.className='nav-item';
        el.textContent=key;
        el.onclick = ()=> { openTopic(key, true); setActiveNav(el); };
        uniNav.appendChild(el);
      }
    }

    function setActiveNav(el){
      document.querySelectorAll('.nav-item').forEach(x=>x.classList.remove('active'));
      el.classList.add('active');
    }

    function openTopic(name, isUni=false){
      const main = document.getElementById('mainPanel');
      main.innerHTML=''; // clear
      // select source
      const source = isUni ? DATA.university[name] : DATA.school[name] || DATA.university[name];
      if(!source) return;
      // create topic template
      const tpl = document.getElementById('topicTemplate');
      const node = tpl.content.cloneNode(true);
      node.querySelector('.topic-title').textContent = name;
      node.querySelector('.topic-desc').textContent = source.desc || '';
      const pdfBtn = node.querySelector('.pdf-btn');
      // if topic has any pdf in subtopics show general pdf button
      let hasPdf=false;
      const subcontainer = node.querySelector('.subtopics');
      for(const t of source.topics){
        const st = document.getElementById('subtopicTemplate').content.cloneNode(true);
        st.querySelector('h4').textContent = t.title;
        st.querySelector('p').innerHTML = t.text || '';
        const extras = st.querySelector('.extras');
        if(t.extras){
          for(const ex of t.extras){
            if(ex.type==='image'){
              const img = document.createElement('img');
              img.src=ex.value; img.style.maxWidth='100%'; img.style.marginTop='8px'; img.style.borderRadius='8px';
              extras.appendChild(img);
            } else if(ex.type==='example'){
              const pre = document.createElement('div');
              pre.style.marginTop='8px';
              pre.style.background='rgba(255,255,255,0.02)'; pre.style.padding='8px'; pre.style.borderRadius='6px';
              pre.textContent = ex.value;
              extras.appendChild(pre);
            } else if(ex.type==='pdf'){
              const a = document.createElement('a');
              a.href = ex.value; a.target='_blank'; a.className='pdf-btn'; a.textContent='ðŸ“„ Ochish';
              extras.appendChild(a);
              hasPdf=true;
            }
          }
        }
        subcontainer.appendChild(st);
      }
      if(hasPdf){
        pdfBtn.classList.remove('hidden');
        pdfBtn.href = 'matanaliz.pdf';
        pdfBtn.textContent = 'ðŸ“„ Matanaliz PDF';
      }
      main.appendChild(node);
      // scroll to top of main content
      window.scrollTo({top:0,behavior:'smooth'});
    }

    function toggleCollapse(el){
      el.classList.toggle('open');
      const next = el.nextElementSibling;
      if(next) next.classList.toggle('hidden');
    }

    function openPDF(name){
      window.open(name, '_blank');
    }

    function scrollToTop(){ window.scrollTo({top:0, behavior:'smooth'}); }

    /* === SEARCH === */
    function doSearch(){
      const q = document.getElementById('globalSearch').value.trim().toLowerCase();
      if(!q) { alert('Iltimos, qidiruv uchun so\'z kiriting'); return; }
      // search through DATA
      const results = [];
      const check = (section, sName, topic, isUni)=>{
        if(section[topic].title && section[topic].title.toLowerCase().includes(q)) return true;
        return false;
      }
      // iterate school
      for(const sec in DATA.school){
        const s = DATA.school[sec];
        for(const t of s.topics){
          if(t.title.toLowerCase().includes(q) || (t.text && t.text.toLowerCase().includes(q))){
            results.push({kind:'school', section:sec, topic:t.title});
          }
        }
      }
      for(const sec in DATA.university){
        const s = DATA.university[sec];
        for(const t of s.topics){
          if(t.title.toLowerCase().includes(q) || (t.text && t.text.toLowerCase().includes(q))){
            results.push({kind:'university', section:sec, topic:t.title});
          }
        }
      }
      if(results.length===0){ alert('Hech narsa topilmadi. So\'zni o\'zgartirib ko\'ring.'); return; }
      // show results in main panel
      const main = document.getElementById('mainPanel');
      main.innerHTML = '';
      const card = document.createElement('div'); card.className='topic-card';
      const h = document.createElement('div'); h.className='topic-header';
      const title = document.createElement('div'); title.innerHTML = `<div class="topic-title">Qidiruv natijalari (${results.length})</div><div class="topic-desc">"${q}" so'zi bo'yicha topildi</div>`;
      h.appendChild(title);
      card.appendChild(h);
      const sub = document.createElement('div'); sub.className='subtopics';
      results.forEach(r=>{
        const item = document.createElement('div'); item.className='subtopic';
        const h4 = document.createElement('h4'); h4.textContent = `${r.section} â€” ${r.topic}`;
        const p = document.createElement('p'); p.textContent = `Turi: ${r.kind==='school'?'Maktab':'Universitet'}`;
        item.appendChild(h4); item.appendChild(p);
        item.onclick = ()=> {
          // open respective section and highlight
          enterSite(r.kind==='school'?'student':'university');
          setTimeout(()=> {
            // find and open section
            const navCol = document.querySelectorAll('.nav-item');
            navCol.forEach(n=>{
              if(n.textContent===r.section) n.click();
            });
            // then attempt to scroll to subtopic
            setTimeout(()=>{
              const tops = Array.from(document.querySelectorAll('.subtopic'));
              const found = tops.find(t=> t.querySelector('h4').textContent===r.topic);
              if(found) found.scrollIntoView({behavior:'smooth', block:'center'});
            },250);
          },250);
        };
        sub.appendChild(item);
      });
      card.appendChild(sub);
      main.appendChild(card);
    }

    /* ====== small helpers: prefill nav active state ====== */
    // open first on load? no - wait for enterSite
    // allow opening topic by name from outside
    function openTopicByName(name){
      // if name in school
      if(DATA.school[name]){ enterSite('student'); setTimeout(()=> openTopic(name),200); return; }
      if(DATA.university[name]){ enterSite('university'); setTimeout(()=> openTopic(name,true),200); return; }
    }

    // Expose for console
    window.openTopic = openTopic;
    window.openPDF = openPDF;
    window.enterSite = enterSite;
    window.openTopicByName = openTopicByName;

    /* ======= keyboard shortcut: / to focus search ======= */
    document.addEventListener('keydown', (e)=>{
      if(e.key==='/' && document.activeElement.tagName !== 'INPUT') {
        e.preventDefault();
        document.getElementById('globalSearch').focus();
      }
    });

  </script>
</body>
</html>
